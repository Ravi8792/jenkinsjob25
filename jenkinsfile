pipeline {
    agent any
    parameters {
        string defaultValue: '1.0.0', description: 'Enter the version number ', name: 'ENV', trim: true
        choice choices: ['DEV', 'QA', 'PROD'], description: 'Select environment ', name: 'TEST'
    }

    stages {
        stage('BUILD') {
            steps {
                echo "User selected version is ${params.ENV}"
                echo "User selected environment is ${params.TEST}"
                echo 'this is Bild stage'
                sh 'sleep 5'
            }
        }

        stage('TEST PARALLEL') {
            parallel {
                stage('TEST ON CHROME BUILD') {
                    steps {
                        echo 'this is Chrome_Build stages'
                        sh 'sleep 5'
                    }
                }
                stage('TEST ON SAFARI BUILD') {
                    steps {
                        echo "User selected version is ${params.ENV}"
                        echo "User selected environment is ${params.TEST}"
                        echo 'this is Safari_build stage'
                        sh 'sleep 5'
                    }
                }
            }
        }

        stage('DEPLOY') {
            parallel {
                stage('DEPLOY ON SERVER1') {
                    steps {
                        echo 'this is deploy on Server1'
                        sh 'sleep 5'
                    }
                }
                stage('DEPLOY ON SERVER2') {
                    steps {
                        echo 'this is deploy on Server2'
                        sh 'sleep 5'
                    }
                }
                stage('DEPLOY ON SERVER3') {
                    steps {
                        echo 'this is deploy on Server3'
                        sh 'sleep 5'
                    }
                }
            }
        }
    }
}
